{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo-release.json"}, "html": {"href": "#!/osrf/gazebo-release"}, "avatar": {"href": "data/bytebucket.org/ravatar/{95a21594-633d-4752-b9d6-5be95d20150c}ts=default"}}, "type": "repository", "name": "gazebo-release", "full_name": "osrf/gazebo-release", "uuid": "{95a21594-633d-4752-b9d6-5be95d20150c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo-release/issues/40/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo-release/issues/40.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo-release/issues/40/watch"}, "comments": {"href": "data/repositories/osrf/gazebo-release/issues/40/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo-release/issues/40/resolve-exposed-dev-interfaces-on"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo-release/issues/40/vote"}}, "reporter": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "title": "Resolve exposed -dev interfaces on underlying libraries", "component": null, "votes": 0, "watches": 1, "content": {"raw": "There are at least two cases where Gazebo's public headers `#include` headers from underyling libraries:\r\n\r\n* [cegui](https://bitbucket.org/osrf/gazebo/src/f39abc5796cee1630ac1b6708b0dad23828a0f7e/gazebo/rendering/cegui.h?at=default#cl-26); need `libcegui-mk2-dev`\r\n* [tbb](https://bitbucket.org/osrf/gazebo/src/f39abc5796cee1630ac1b6708b0dad23828a0f7e/gazebo/transport/Connection.hh?at=default#cl-20); need `libtbb-dev`\r\n\r\nThis is a problem because the Gazebo deb is being built with dependencies only on the run-time version of those libraries.  So when people try to build against Gazebo, they get [errors about missing headers](https://github.com/ros-simulation/gazebo_ros_pkgs/issues/76).\r\n\r\nIn general, it would be better to keep the dependencies as is and restructure Gazebo's headers to hide the use of the underlying libraries from users.  But the quicker solution is to add the `-dev` packages to Gazebo's runtime dependencies when building a deb.", "markup": "markdown", "html": "<p>There are at least two cases where Gazebo's public headers <code>#include</code> headers from underyling libraries:</p>\n<ul>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/src/f39abc5796cee1630ac1b6708b0dad23828a0f7e/gazebo/rendering/cegui.h?at=default#cl-26\" rel=\"nofollow\">cegui</a>; need <code>libcegui-mk2-dev</code></li>\n<li><a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/gazebo/src/f39abc5796cee1630ac1b6708b0dad23828a0f7e/gazebo/transport/Connection.hh?at=default#cl-20\" rel=\"nofollow\">tbb</a>; need <code>libtbb-dev</code></li>\n</ul>\n<p>This is a problem because the Gazebo deb is being built with dependencies only on the run-time version of those libraries.  So when people try to build against Gazebo, they get <a data-is-external-link=\"true\" href=\"https://github.com/ros-simulation/gazebo_ros_pkgs/issues/76\" rel=\"nofollow\">errors about missing headers</a>.</p>\n<p>In general, it would be better to keep the dependencies as is and restructure Gazebo's headers to hide the use of the underlying libraries from users.  But the quicker solution is to add the <code>-dev</code> packages to Gazebo's runtime dependencies when building a deb.</p>", "type": "rendered"}, "assignee": {"display_name": "Brian Gerkey", "uuid": "{3d8b5763-9dad-4be7-85c2-a7ab6cd49173}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D"}, "html": {"href": "https://bitbucket.org/%7B3d8b5763-9dad-4be7-85c2-a7ab6cd49173%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9/5fa9ec73-0fec-4860-a202-e34ae23b6a12/128"}}, "nickname": "Brian Gerkey", "type": "user", "account_id": "557058:2e35028e-9ad8-4d6a-a3a5-275159a304a9"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2013-07-15T20:14:08.627310+00:00", "milestone": null, "updated_on": "2013-07-15T20:47:22.814320+00:00", "type": "issue", "id": 40}