{"priority": "major", "kind": "enhancement", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo-release.json"}, "html": {"href": "#!/osrf/gazebo-release"}, "avatar": {"href": "data/bytebucket.org/ravatar/{95a21594-633d-4752-b9d6-5be95d20150c}ts=default"}}, "type": "repository", "name": "gazebo-release", "full_name": "osrf/gazebo-release", "uuid": "{95a21594-633d-4752-b9d6-5be95d20150c}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo-release/issues/36/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo-release/issues/36.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo-release/issues/36/watch"}, "comments": {"href": "data/repositories/osrf/gazebo-release/issues/36/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo-release/issues/36/auto-source-setupsh-at-starting-time-and"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo-release/issues/36/vote"}}, "reporter": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "title": "Auto source setup.sh at starting time and respect defined variables", "component": null, "votes": 0, "watches": 1, "content": {"raw": "This issue and proposed solution was recommended by @thomas_moulard via mail:\r\n\r\nIt would be great not make the assumption that setup.sh will be sourced. There is no clean way to ensure this and what is inside bin/ should be usable without any additional configuration.\r\n\r\nTwo patches affecting setup.sh:\r\n\r\n* In setup.sh only define the environment variables if they are not only defined. \r\n[patch example for gazebo](http://anonscm.debian.org/gitweb/?p=debian-science/packages/gazebo.git;a=blob;f=debian/patches/0002-In-cmake-setup.sh-do-not-override-already-defined-en.patch;h=70e4c073c6e0cfcbe3edb0238f0b2fd13d2d4f6b;hb=HEAD)\r\n\r\n* Replace the gazebo binary by a wrapper sourcing setup.sh then launching gazebo.\r\n\r\nIn this case, either the user does not have any specified environment variable and it will fill them with the default ones or it has some and in this case it won't change the configuration.", "markup": "markdown", "html": "<p>This issue and proposed solution was recommended by @thomas_moulard via mail:</p>\n<p>It would be great not make the assumption that setup.sh will be sourced. There is no clean way to ensure this and what is inside bin/ should be usable without any additional configuration.</p>\n<p>Two patches affecting setup.sh:</p>\n<ul>\n<li>\n<p>In setup.sh only define the environment variables if they are not only defined. \n<a data-is-external-link=\"true\" href=\"http://anonscm.debian.org/gitweb/?p=debian-science/packages/gazebo.git;a=blob;f=debian/patches/0002-In-cmake-setup.sh-do-not-override-already-defined-en.patch;h=70e4c073c6e0cfcbe3edb0238f0b2fd13d2d4f6b;hb=HEAD\" rel=\"nofollow\">patch example for gazebo</a></p>\n</li>\n<li>\n<p>Replace the gazebo binary by a wrapper sourcing setup.sh then launching gazebo.</p>\n</li>\n</ul>\n<p>In this case, either the user does not have any specified environment variable and it will fill them with the default ones or it has some and in this case it won't change the configuration.</p>", "type": "rendered"}, "assignee": {"display_name": "Jose Luis Rivero", "uuid": "{d12309b2-f745-42ee-b119-aec4fcdf81fe}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D"}, "html": {"href": "https://bitbucket.org/%7Bd12309b2-f745-42ee-b119-aec4fcdf81fe%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/109284c8b83411dbc7492138f6167e9ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJR-5.png"}}, "nickname": "Jose Luis Rivero", "type": "user", "account_id": "557058:155a32e2-420c-4d50-98e0-0e722f63f906"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2013-07-14T23:25:10.911616+00:00", "milestone": {"name": "debian-requirement", "links": {"self": {"href": "data/repositories/osrf/gazebo-release/milestones/71195.json"}}}, "updated_on": "2013-07-19T11:29:00.994162+00:00", "type": "issue", "id": 36}